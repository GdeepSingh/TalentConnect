<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Work Experience â€¢ TalentConnect</title>
  <link rel="stylesheet" href="../css/style.css" />

  <style>
/* EXPERIENCE BOX STYLE */
.exp-box {
  border: 1px solid var(--border);
  padding: 10px 14px;
  border-radius: 8px;
  background: #f9fafb;
  margin-bottom: 10px;
}

.exp-title {
  font-weight: 700;
  font-size: 1rem;
  margin-bottom: 4px;
}

.exp-dates {
  font-size: 0.85rem;
  color: #555;
}

.exp-delete {
  color: red;
  font-size: 0.8rem;
  cursor: pointer;
  float: right;
}
  </style>
</head>

<body>

<header class="site-header">
  <div class="site-header__inner">
    <div class="brand">
      <div class="brand__logo"></div>
      <div class="brand__name">TalentConnect</div>
    </div>
    <div class="muted">Step <strong>2</strong> of 4</div>
  </div>
</header>

<main class="container">

  <div class="stepper">
    <div class="stepper__dot stepper__dot--done"></div>
    <div class="stepper__dot stepper__dot--active"></div>
    <div class="stepper__dot"></div>
    <div class="stepper__dot"></div>
  </div>

  <section class="card">

    <h1 class="card__title">Work Experience</h1>
    <p class="card__note">Add at least one job. You can add more.</p>

    <!-- ðŸ”¹ SAVED EXPERIENCE GOES HERE -->
    <div id="expList"></div>

    <!-- ðŸ”¹ FORM -->
    <form id="expForm" novalidate>

      <label>Job Title</label>
      <input id="jobTitle" type="text" placeholder="e.g. Sales Associate" />

      <label>Company</label>
      <input id="company" type="text" placeholder="e.g. Adidas" />

      <div class="row">
        <div>
          <label>Location</label>
          <input id="location" type="text" placeholder="City, Country">
        </div>
        <div>
          <label>Currently working?</label>
          <select id="current">
            <option>No</option>
            <option>Yes</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Start Date</label>
          <input id="start" type="date">
        </div>
        <div>
          <label>End Date</label>
          <input id="end" type="date">
        </div>
      </div>

      <label>Description (optional)</label>
      <textarea id="desc" rows="3"></textarea>

      <div class="actions">
        <button type="button" class="btn btn--ghost" id="addAnother">
          Save & Add Another
        </button>

        <a id="continueBtn" class="btn btn--primary" href="education.html">
          Save & Continue â†’
        </a>
      </div>
    </form>

  </section>
</main>

<footer class="site-footer">Â© 2025 TalentConnect</footer>


<!-- ================== SCRIPT ================== -->
<script>
/* ========= STORAGE ========= */
function getExp() {
  return JSON.parse(localStorage.getItem("tc_experience")) || [];
}
function saveExp(list) {
  localStorage.setItem("tc_experience", JSON.stringify(list));
}

/* ========= RENDER SAVED EXPERIENCE ========= */
function rebuildList() {
  const box = document.getElementById("expList");
  const list = getExp();

  box.innerHTML = "";

  list.forEach((e,i) => {
    box.innerHTML += `
      <div class="exp-box">
        <span class="exp-delete" onclick="deleteExp(${i})">âœ–</span>
        <div class="exp-title">${e.title} â€“ ${e.company}</div>
        <div class="exp-dates">
          ${e.start} â†’ ${e.current ? "Present" : e.end}
        </div>
      </div>
    `;
  });
}

/* ========= DELETE ========= */
function deleteExp(i){
  const list = getExp();
  list.splice(i,1);
  saveExp(list);
  rebuildList();
}

/* ========= CREATE ENTRY ========= */
function collectEntry() {
  return {
    title: jobTitle.value.trim(),
    company: company.value.trim(),
    location: location.value,
    current: current.value === "Yes",
    start: start.value,
    end: end.value,
    desc: desc.value.trim(),
    id: Date.now()
  };
}

/* ========= SAVE & ADD ANOTHER ========= */
document.getElementById("addAnother").addEventListener("click", () => {
  let e = collectEntry();

  if (!e.title || !e.company) {
    alert("Please enter Job Title & Company");
    return;
  }

  let list = getExp();
  list.push(e);
  saveExp(list);

  document.getElementById("expForm").reset();
  rebuildList();
});

/* ========= SAVE & CONTINUE ========= */
document.getElementById("continueBtn").addEventListener("click", () => {
  let e = collectEntry();
  if(e.title && e.company){
    let L = getExp();
    L.push(e);
    saveExp(L);
  }
});

/* ==== FIRST LOAD ==== */
rebuildList();
</script>

</body>
</html>
