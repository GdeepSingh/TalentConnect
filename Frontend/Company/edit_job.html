<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Job · TalentConnect</title>
  <link rel="stylesheet" href="../css/style.css">
</head>

<body>

<header class="site-header">
  <div class="site-header__inner">
    <div class="brand">
      <div class="brand__logo"></div>
      <span class="brand__name">TalentConnect</span>
    </div>

    <nav style="display:flex;gap:12px;">
      <a class="btn btn--ghost" href="manage_jobs.html">Manage Jobs</a>
      <a class="btn btn--ghost" href="applicants.html">Applicants</a>

      <form action="../../Backend/user_signout.php" method="post">
        <input type="submit" value="Sign Out">
      </form>
    </nav>
  </div>
</header>


<main class="container">
  <div class="card">
    <p class="card__title">Edit Job</p>
    <p class="card__note">Update job details and visibility.</p>

    <form id="editForm" method="POST" action="../../Backend/edit_job.php">
      <input type="hidden" name="job_id" id="job_id">

      <label>Job Title</label>
      <input type="text" id="title" name="title" required>

      <div class="row">
        <div>
          <label>Location</label>
          <input type="text" id="location" name="location" required>
        </div>
        <div>
          <label>Job Type</label>
          <select id="job_type" name="job_type" required>
            <option value="full_time">Full-time</option>
            <option value="part_time">Part-time</option>
            <option value="contract">Contract</option>
            <option value="internship">Internship</option>
            <option value="temporary">Temporary</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Minimum Salary</label>
          <input type="text" id="min_salary" name="min_salary" required>
        </div>
        <div>
          <label>Maximum Salary</label>
          <input type="text" id="max_salary" name="max_salary" required>
        </div>
      </div>

      <label>Qualification</label>
      <input type="text" id="qualification" name="qualification" required>

      <label>Job Description</label>
      <textarea id="description" name="description" rows="5" required></textarea>

      <label>Visibility</label>
      <select id="visibility" name="visibility">
        <option value="yes">Visible</option>
        <option value="no">Hidden</option>
      </select>

      <div class="actions">
        <a href="manage_jobs.html" class="btn">Cancel</a>
        <button class="btn btn--primary" type="submit">Save Changes</button>
      </div>
    </form>

  </div>
</main>

<footer class="site-footer">© 2025 TalentConnect</footer>


<script>
const urlParams = new URLSearchParams(window.location.search);
const jobID = urlParams.get("job");

document.getElementById("job_id").value = jobID;

fetch("../../Backend/get_single_job.php?job=" + jobID)
  .then(res => res.json())
  .then(job => {
    document.getElementById("title").value = job.title;
    document.getElementById("location").value = job.location;
    document.getElementById("job_type").value = job.jobtype;
    document.getElementById("min_salary").value = job.min_salary;
    document.getElementById("max_salary").value = job.max_salary;
    document.getElementById("qualification").value = job.qualification;
    document.getElementById("description").value = job.description;
    document.getElementById("visibility").value = job.visibility;
  });
</script>

</body>
</html>
